window.ApexChat = window.ApexChat || {};window.ApexChat.internalBaseUrl = 'https://chat.apex.live';window.ApexChat.unCachedBaseUrl = 'https://apex.live';window.ApexChat.externalBaseUrl = 'https://chat.vialivechat.com';window.ApexChat.companyKey = 'ritewindowcom';(function(){window.ApexChat=window.ApexChat||{};var e=1,t=2;window.ApexChat.slimCDN=function(){this.slimCDNFactory={init:function(){var e=this;e.setbaseCDNUrl(),e.baseCDNUrl&&e.queryString||console.log("There is a problem with your chat widget code");try{if(e.job=e.runAsBackground.start(),!e.job)throw"Cannot start a background job";e.job.onmessage=t=>{if(t.data.cmd)if(e.pushScriptToDOM(t.data.script),"configLoaded"==t.data.cmd){var i=e.getDeviceConfig();if(!i)return void console.log((e.isMobile(),"mobile"));window.ApexChat.invitationConfig.logVisitDelay?setTimeout((function(){e.job.postMessage({cmd:"logVisit",baseCDNUrl:e.unCachedUrl,queryString:e.getPingQuery()})}),1e3*window.ApexChat.invitationConfig.logVisitDelay):e.job.postMessage({cmd:"logVisit",baseCDNUrl:e.unCachedUrl,queryString:e.getPingQuery()}),i.operatorEnabledOnly&&e.job.postMessage({cmd:"checkOperator",baseCDNUrl:e.baseCDNUrl,queryString:e.getPingQuery()}),i.pacingEnabled&&e.job.postMessage({cmd:"checkBudgetingPaused",baseCDNUrl:e.baseCDNUrl,queryString:e.getPingQuery()}),e.job.postMessage({cmd:"loadInvitation",baseCDNUrl:e.baseCDNUrl,queryString:e.queryString+"&profileId="+i.profileId})}else"visitLogged"==t.data.cmd&&e.createCookie(e.static.VISITOR_ID_COOKIE,ApexChat.pingResponse.visitorId,365)},e.job.postMessage({cmd:"start",baseCDNUrl:e.baseCDNUrl,queryString:e.queryString});var t=setInterval((function(){if(window.ApexChat.invitationConfig&&window.ApexChat.Invitation){if(window.ApexChat.invitationConfig.pacingEnabled){if(void 0===window.ApexChat.isBudgetPaused)return;if(window.ApexChat.isBudgetPaused)return console.log("The specified company is paused for lead budgeting purposes."),void clearInterval(t)}if(window.ApexChat.invitationConfig.operatorEnabledOnly){if(void 0===window.ApexChat.isOperatorAvailable)return;if(!window.ApexChat.isOperatorAvailable)return console.log("No operator is available for chat"),void clearInterval(t)}window.ApexChat.Invitation.init(window.ApexChat.invitationConfig),clearInterval(t)}}),100)}catch(t){console.log(t),e.loadConfigs((function(){window.ApexChat.config&&e.loadInvitationCode((function(){e.isOfficeHoursBlocked()||window.ApexChat.Invitation.init(window.ApexChat.invitationConfig)}))}))}},static:{PROFILE_ID_COOKIE:"cdn_apex_profile_id",CHATID_COOKIE:"livechat_chat_id",VISITOR_ID_COOKIE:"livechat_visitor_id"},runAsBackground:{worker:null,workerRunner:function(){self.addEventListener("message",(t=>{"start"===t.data.cmd?async function(t,i){e(t+"/cdn/config.js"+i,(e=>{self.postMessage({cmd:"configLoaded",script:e.currentTarget.response})}))}(t.data.baseCDNUrl,t.data.queryString):"logVisit"===t.data.cmd?async function(t,i){e(t+"/handlers/slim/pinghandler.ashx?"+i,(e=>{self.postMessage({cmd:"visitLogged",script:e.currentTarget.response})}))}(t.data.baseCDNUrl,t.data.queryString):"loadInvitation"===t.data.cmd?async function(t,i){e(t+"/cdn/invitation.js"+i,(e=>{self.postMessage({cmd:"invitationLoaded",script:e.currentTarget.response})}))}(t.data.baseCDNUrl,t.data.queryString):"checkOperator"===t.data.cmd?async function(t,i){e(t+"/handlers/slim/cdn/checkoperatoravailability.ashx?"+i,(e=>{self.postMessage({cmd:"checkOperatorLoaded",script:e.currentTarget.response})}))}(t.data.baseCDNUrl,t.data.queryString):"checkBudgetingPaused"===t.data.cmd?async function(t,i){e(t+"/handlers/slim/cdn/checkbudgetingpause.ashx?"+i,(e=>{self.postMessage({cmd:"checkBudgetingPaused",script:e.currentTarget.response})}))}(t.data.baseCDNUrl,t.data.queryString):"checkBlocking"===t.data.cmd&&async function(t,i){e(t+"/handlers/slim/cdn/checkblocking.ashx?"+i,(e=>{self.postMessage({cmd:"checkBlocking",script:e.currentTarget.response})}))}(t.data.baseCDNUrl,t.data.queryString)}));var e=function(e,t){var i=new XMLHttpRequest;i.open("GET",e),i.onload=t,i.send()}},start:function(){return"undefined"!=typeof Worker?(this.workerRunner=this.workerRunner.toString().replace("function(){","").replace("function() {","").replace("function (){","").replace("function () {",""),this.workerRunner=this.workerRunner.substr(0,this.workerRunner.length-1),this.worker=new Worker(URL.createObjectURL(new Blob([this.workerRunner],{type:"text/javascript"}))),this.worker):null},end:function(){worker&&worker.close()}},loadInvitationCode:function(e){var t=this,i=t.getDeviceConfig();if(i){var n=document.createElement("script");n.src=t.baseCDNUrl+"/cdn/invitation.js"+t.queryString+"&profileId="+i.profileId,n.async="async",n.onload=e,document.head.appendChild(n)}else console.log((t.isMobile(),"mobile"))},loadConfigs:function(e){var t=document.createElement("script");t.src=this.baseCDNUrl+"/cdn/config.js"+this.queryString,t.async="async",t.onload=e,document.head.appendChild(t)},setbaseCDNUrl:function(){var e=this;e.unCachedUrl=window.ApexChat.unCachedBaseUrl,e.baseCDNUrl=window.ApexChat.externalBaseUrl;for(var t=document.getElementsByTagName("script"),i=0;i<t.length;i++){var n=document.createElement("a");if(n.href=t[i].src,e.queryString=n.search,e.queryString||(e.queryString="?company="+window.ApexChat.companyKey),t[i].src&&t[i].src.indexOf("/static.js?company=")>-1||t[i].src&&t[i].src.indexOf("invitation.ashx")>-1){t[i].src.indexOf("apex")>-1&&(e.baseCDNUrl=window.ApexChat.internalBaseUrl);break}}},getDeviceConfig:function(){var i=this,n=i.isMobile()?t:e;if(window.ApexChat.config.length>0){var a=i.readCookie(i.static.PROFILE_ID_COOKIE),o=window.ApexChat.config.filter((function(e){return e.deviceType===n}));if(o.length){if(a){var r=window.ApexChat.config.filter((function(e){return e.profileId===parseInt(a)}));r&&r.length&&r[0].deviceType===n&&(window.ApexChat.invitationConfig=r[0])}window.ApexChat.invitationConfig||(window.ApexChat.invitationConfig=o[Math.floor(Math.random()*o.length)])}else window.ApexChat.invitationConfig=window.ApexChat.config[0];return i.createCookie(i.static.PROFILE_ID_COOKIE,window.ApexChat.invitationConfig.profileId,1440),window.ApexChat.invitationConfig}console.log("Cannot find any config for chat invitation")},isMobile:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t||document.documentElement.clientWidth<500&&(t=!0),t},pushScriptToDOM:function(e){var t=document.createDocumentFragment(),i=document.createElement("script");i.innerHTML=e,i.type="text/javascript",t.appendChild(i),document.head.appendChild(t)},getPingQuery:function(){var e=this;return"company="+e.getCompanyKey()+"&visitorId="+(e.readCookieValue(e.static.VISITOR_ID_COOKIE)||0)+"&profileId="+e.getProfileId()+"&gclid="+e.getValueFromQueryString("gclid")+"&gs="+e.getValueFromQueryString("utm_source")+"&gm="+e.getValueFromQueryString("utm_medium")+"&gc="+e.getValueFromQueryString("utm_campaign")+"&chatId="+e.readCookie(e.static.CHATID_COOKIE)+"&originalReferrer="+encodeURIComponent(document.referrer).substring(0,500)},getCompanyKey:function(){return window.ApexChat.config[0].companyKey||""},getProfileId:function(){var e=this,t=e.readCookie(e.static.PROFILE_ID_COOKIE);return t||(t=e.getDeviceConfig().profileId),t},readCookie:function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var a=i[n];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return null},readCookieValue:function(e){if(e){var t=e.substring(0,9);return"livechat_"===t?(e=e.substring(t.length,e.length),this.readCookie("apexchat_"+e)||this.readCookie("livechat_"+e)):readCookie(e)}},createCookie:function(e,t,i){if(i){var n=new Date;n.setTime(n.getTime()+60*i*1e3);var a="; expires="+n.toGMTString()}else a="";document.cookie=e+"="+t+a+"; path=/"},getValueFromQueryString:function(e){for(var t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var n=t[i].split("=");if(n[0]==e)return n[1]}return""},isOfficeHoursBlocked:function(){return ApexChat.companyLevelBlockValidator&&ApexChat.companyLevelBlockValidator.isOfficeHoursBlocked()}}.init()},"complete"===document.readyState?window.ApexChat.slimCDN():window.attachEvent?window.attachEvent("onload",window.ApexChat.slimCDN):window.addEventListener("load",window.ApexChat.slimCDN)})();